# Enable Rewrite
RewriteEngine On

# Remove index.html in any folder
RewriteRule ^(.*/)?index\.html$ /$1 [R=301,L]

# Prevent redirect loops
RewriteCond %{HTTP_HOST} ^www\.thegenieorlando\.com$ [NC]
RewriteCond %{HTTPS} on
RewriteRule ^ - [L]




# ---------------------------
# Security Headers
# ---------------------------
#Force HTTPS
Header always set Content-Security-Policy: upgrade-insecure-requests;

# HSTS: Enforce HTTPS for 2 years, include subdomains, preload list
Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"

# Prevent clickjacking
Header always set X-Frame-Options "SAMEORIGIN"

# Prevent MIME-type sniffing
Header always set X-Content-Type-Options "nosniff"

# Basic XSS protection
Header always set X-XSS-Protection "1; mode=block"

# Control referrer data sent
Header always set Referrer-Policy "strict-origin-when-cross-origin"

# ---------------------------

# Custom 404 Page
ErrorDocument 404 /404.html

# ===========================================================
# LEGACY URL REDIRECTS - OLDER WORDPRESS STRUCTURE
# (Added December 2025 - These were from an earlier site version
# that was not documented during handoff)
# ===========================================================

# CRITICAL: This /rates/ redirect was missing and is likely
# causing significant ranking loss on the pricing page
Redirect 301 /rates/ /rates.html
Redirect 301 /rates /rates.html

Redirect 301 /mcotransportation/ /orlando-airport-transportation.html
Redirect 301 /mcotransportation /orlando-airport-transportation.html

Redirect 301 /wdwtransportation/ /walt-disney-world-transportation.html
Redirect 301 /wdwtransportation /walt-disney-world-transportation.html

Redirect 301 /thewessicaway/ /walt-disney-world-transportation.html
Redirect 301 /thewessicaway /walt-disney-world-transportation.html

Redirect 301 /portcanaveral/ /port-canaveral-transportation.html
Redirect 301 /portcanaveral /port-canaveral-transportation.html

# Additional legacy URL patterns that may have existed
Redirect 301 /portcanaveraltransportation/ /port-canaveral-transportation.html
Redirect 301 /portcanaveraltransportation /port-canaveral-transportation.html

Redirect 301 /about-us/ /about.html
Redirect 301 /about-us /about.html

Redirect 301 /rates-new/ /rates.html
Redirect 301 /rates-new /rates.html

Redirect 301 /faqs/ /faq.html
Redirect 301 /faqs /faq.html

Redirect 301 /travel-agents-program/ /travel-agents.html
Redirect 301 /travel-agents-program /travel-agents.html

Redirect 301 /contact-us/ /contact.html
Redirect 301 /contact-us /contact.html

Redirect 301 /travel-agents-reservations-portal-new/ /travel-agents.html
Redirect 301 /travel-agents-reservations-portal-new /travel-agents.html

Redirect 301 /privacy-policy/ /privacy-policy.html
Redirect 301 /privacy-policy /privacy-policy.html

Redirect 301 /the-genie-transportation-joins-national-limousine-association-upholds-top-ground-transportation-standards/ /about.html
Redirect 301 /the-genie-transportation-joins-national-limousine-association-upholds-top-ground-transportation-standards /about.html

Redirect 301 /the-genie-transportation-certified-and-trusted-vehicle-for-hire-operator-at-mco/ /about.html
Redirect 301 /the-genie-transportation-certified-and-trusted-vehicle-for-hire-operator-at-mco /about.html

Redirect 301 /orlando-news-channel-6/ /about.html
Redirect 301 /orlando-news-channel-6 /about.html

Redirect 301 /in-the-news/ /about.html
Redirect 301 /in-the-news /about.html

Redirect 301 /disney-cruise-line-community-travel-blog/ /blog
Redirect 301 /disney-cruise-line-community-travel-blog /blog

Redirect 301 /mco-airport-transportation/ /orlando-airport-transportation.html
Redirect 301 /mco-airport-transportation /orlando-airport-transportation.html

Redirect 301 /orlando-stroller-rentals/ /orlando-stroller-rentals.html
Redirect 301 /orlando-stroller-rentals /orlando-stroller-rentals.html

Redirect 301 /walt-disney-world-transportation/ /walt-disney-world-transportation.html
Redirect 301 /walt-disney-world-transportation /walt-disney-world-transportation.html

Redirect 301 /universal-orlando-transportation/ /universal-studios-transportation.html
Redirect 301 /universal-orlando-transportation /universal-studios-transportation.html

Redirect 301 /orlando-port-canaveral-transportation/ /port-canaveral-transportation.html
Redirect 301 /orlando-port-canaveral-transportation /port-canaveral-transportation.html

RedirectMatch 301 ^/port-canaveral/?$ /port-canaveral-transportation.html


Redirect 301 /terms-conditions/ /terms-conditions.html
Redirect 301 /terms-conditions /terms-conditions.html

Redirect 301 /a-message-from-the-founder/ /about.html
Redirect 301 /a-message-from-the-founder /about.html

RedirectMatch 301 ^/book-online/?$ /booking.html

Redirect 301 /images/the-genie-transportaion-services.png /images/the-genie-transportation-services.png

Redirect 301 /orlando-stroller-rentals.html /disney-stroller-rental.html

# Redirect ALL traffic (HTTP, non-www, addon domains) to https://www.thegenieorlando.com
RewriteCond %{HTTP_HOST} !^www\.thegenieorlando\.com$ [NC,OR]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://www.thegenieorlando.com/$1 [L,R=301]

# ---------------------------
# Enable Gzip Compression for text files
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

# ---------------------------
# Cache Control
<IfModule mod_expires.c>
  ExpiresActive On
  # Long-term caching for versioned static files
  ExpiresByType image/jpg "access 1 year"
  ExpiresByType image/jpeg "access 1 year"
  ExpiresByType image/gif "access 1 year"
  ExpiresByType image/png "access 1 year"
  ExpiresByType image/svg+xml "access 1 year"
  # Shorter caching for files that may change
  ExpiresByType text/css "access 1 month"
  ExpiresByType application/javascript "access 1 month"
  ExpiresDefault "access 1 month"
</IfModule>

# ---------------------------
# PHP Handler (cPanel)
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php81” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit
